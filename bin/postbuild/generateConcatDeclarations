#!/usr/bin/env node

const fs = require("fs");

const OUT_DIR = process.argv[2];

const ALPHABET = 'abcdefghijklmnopqrstuvwxyz';

let dec = 'import { Obj } from "./obj";\n';

for (let i = 1; i <= 26; i++) {
  const nums = Array(i).fill(0).map((_, i) => i + 1);
  const typeParams = nums.map(n => `T${n}`).join(', ');
  const params = nums.map(n => `${ALPHABET[n - 1]}: T${n}`).join(', ');
  const returnType = nums.map(n => `T${n}`).join(' & ');
  dec += `export declare function concat<${typeParams}>(${params}): ${returnType};\n`;
}

dec += `export declare function concat(...objs: Obj[]): Obj[];\n`;

fs.writeFileSync(`${OUT_DIR}/object/concat.d.ts`, dec);
